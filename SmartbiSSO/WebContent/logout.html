<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>JS脚本登录成功</title>
<style type="text/css">
	div{
	  	text-align:center
	  }
	a{
		text-decoration: none
	}
</style>
</head>
<body>
	<div>
		<p id="succ">
			<font color="red">单点登录成功</font>
		</p>
		smartbi地址：<input type="text"  value="http://localhost:8080/smartbi" name="smartbiUrl" size="50"><br/>
		单点登录用户：<input type="text" value="admin" name="user" size="20"><br/>
		单点登录密码：<input type="text"  value="admin" name="password" size="20"><br/>
		打开资源id：<input type="text" id="resid" value="I402881f738d5a79a0138d5c88f7e0089" size="50"/><br/>
		<input type="button" value="新窗口打开资源" onclick="window.open(document.getElementsByName('smartbiUrl')[0].value + '/vision/openresource.jsp?resid='+ document.getElementById('resid').value)">
		<input type="button" value="IFrame打开资源" onclick="linkFrame()">
		<form method="POST" id="formLogout" onsubmit="go();return false">
		    <p>注销成功后的跳转地址：<input type="text" name="surl" size="50" value="http://www.baidu.com"></p>
		    <p>注销失败后的跳转地址：<input type="text" name="furl" size="50" value="http://www.qq.com"></p>    
		    <p><input type="submit" value="注销" name="B1"></p>
		</form>
	</div>
	<iframe id="frame" src="" height="300" width="100%" style="display: none">
	</iframe>
	<p>
		备注：<br/>
	</p>
	<script type="text/javascript">
		function linkFrame() {
			document.getElementById("frame").style.display = '';
			document.getElementById("frame").src = "vision/openresource.jsp?resid="+ document.getElementById('resid').value;
		}
		//注销
		function go(){
		    formLogout.action = document.getElementsByName("smartbiUrl")[0].value+"/vision/logout.jsp";
		    formLogout.surl.value = document.getElementsByName("surl")[0].value; // 注销成功后的跳转地址 为空时自动跳转到smartbi的index.jsp
		    formLogout.furl.value = document.getElementsByName("furl")[0].value; // 注销失败后的跳转地址 为空时自动跳转到smartbi的index.jsp
		    formLogout.submit();
		    return true;
		}
	</script>
</body>
</html>